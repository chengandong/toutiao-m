{"version":3,"sources":["webpack:///./src/views/search/components/search-result.vue?3616","webpack:///./node_modules/core-js/modules/es.regexp.constructor.js","webpack:///./src/views/search/index.vue?754a","webpack:///./src/views/search/index.vue?73c9","webpack:///./src/views/search/components/search-suggestion.vue?2bae","webpack:///./src/api/search.js","webpack:///src/views/search/components/search-suggestion.vue","webpack:///./src/views/search/components/search-suggestion.vue?529f","webpack:///./src/views/search/components/search-suggestion.vue","webpack:///./src/views/search/components/search-history.vue?8356","webpack:///src/views/search/components/search-history.vue","webpack:///./src/views/search/components/search-history.vue?3aca","webpack:///./src/views/search/components/search-history.vue","webpack:///./src/views/search/components/search-result.vue?f6f0","webpack:///src/views/search/components/search-result.vue","webpack:///./src/views/search/components/search-result.vue?4990","webpack:///./src/views/search/components/search-result.vue?ddc9","webpack:///src/views/search/index.vue","webpack:///./src/views/search/index.vue?2b70","webpack:///./src/views/search/index.vue"],"names":["DESCRIPTORS","global","isForced","inheritIfRequired","defineProperty","f","getOwnPropertyNames","isRegExp","getFlags","stickyHelpers","redefine","fails","setInternalState","set","setSpecies","wellKnownSymbol","MATCH","NativeRegExp","RegExp","RegExpPrototype","prototype","re1","re2","CORRECT_NEW","UNSUPPORTED_Y","FORCED","RegExpWrapper","pattern","flags","sticky","thisIsRegExp","this","patternIsRegExp","flagsAreUndefined","undefined","constructor","source","call","indexOf","replace","result","proxy","key","configurable","get","it","keys","index","length","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","$event","onSearch","searchValue","$router","back","isResultShow","model","value","callback","$$v","expression","searchHistories","staticRenderFns","_l","suggestion","$emit","domProps","_s","highlight","slot","getSearchSuggestions","q","request","method","url","params","getSearchResults","name","props","type","String","required","data","suggestions","watch","handler","immediate","methods","component","_v","isDeleteShow","history","onDelete","directives","rawName","Array","splice","finished","onLoadArticle","artLoading","article","title","articlelist","page","perPage","components","SearchSuggestion","SearchHistory","SearchResult","computed","created","loadSearchHistories","unshift"],"mappings":"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","file":"js/chunk-4d909596.5e3bb2dd.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-result.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-result.vue?vue&type=style&index=0&lang=css&\"","var DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar isRegExp = require('../internals/is-regexp');\nvar getFlags = require('../internals/regexp-flags');\nvar stickyHelpers = require('../internals/regexp-sticky-helpers');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar setInternalState = require('../internals/internal-state').set;\nvar setSpecies = require('../internals/set-species');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\nvar NativeRegExp = global.RegExp;\nvar RegExpPrototype = NativeRegExp.prototype;\nvar re1 = /a/g;\nvar re2 = /a/g;\n\n// \"new\" should create a new object, old webkit bug\nvar CORRECT_NEW = new NativeRegExp(re1) !== re1;\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;\n\nvar FORCED = DESCRIPTORS && isForced('RegExp', (!CORRECT_NEW || UNSUPPORTED_Y || fails(function () {\n  re2[MATCH] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return NativeRegExp(re1) != re1 || NativeRegExp(re2) == re2 || NativeRegExp(re1, 'i') != '/a/i';\n})));\n\n// `RegExp` constructor\n// https://tc39.github.io/ecma262/#sec-regexp-constructor\nif (FORCED) {\n  var RegExpWrapper = function RegExp(pattern, flags) {\n    var thisIsRegExp = this instanceof RegExpWrapper;\n    var patternIsRegExp = isRegExp(pattern);\n    var flagsAreUndefined = flags === undefined;\n    var sticky;\n\n    if (!thisIsRegExp && patternIsRegExp && pattern.constructor === RegExpWrapper && flagsAreUndefined) {\n      return pattern;\n    }\n\n    if (CORRECT_NEW) {\n      if (patternIsRegExp && !flagsAreUndefined) pattern = pattern.source;\n    } else if (pattern instanceof RegExpWrapper) {\n      if (flagsAreUndefined) flags = getFlags.call(pattern);\n      pattern = pattern.source;\n    }\n\n    if (UNSUPPORTED_Y) {\n      sticky = !!flags && flags.indexOf('y') > -1;\n      if (sticky) flags = flags.replace(/y/g, '');\n    }\n\n    var result = inheritIfRequired(\n      CORRECT_NEW ? new NativeRegExp(pattern, flags) : NativeRegExp(pattern, flags),\n      thisIsRegExp ? this : RegExpPrototype,\n      RegExpWrapper\n    );\n\n    if (UNSUPPORTED_Y && sticky) setInternalState(result, { sticky: sticky });\n\n    return result;\n  };\n  var proxy = function (key) {\n    key in RegExpWrapper || defineProperty(RegExpWrapper, key, {\n      configurable: true,\n      get: function () { return NativeRegExp[key]; },\n      set: function (it) { NativeRegExp[key] = it; }\n    });\n  };\n  var keys = getOwnPropertyNames(NativeRegExp);\n  var index = 0;\n  while (keys.length > index) proxy(keys[index++]);\n  RegExpPrototype.constructor = RegExpWrapper;\n  RegExpWrapper.prototype = RegExpPrototype;\n  redefine(global, 'RegExp', RegExpWrapper);\n}\n\n// https://tc39.github.io/ecma262/#sec-get-regexp-@@species\nsetSpecies('RegExp');\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=5b8fa762&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=5b8fa762&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-container\"},[_c('form',{attrs:{\"action\":\"/\"}},[_c('van-search',{attrs:{\"placeholder\":\"请输入搜索关键词\",\"show-action\":\"\",\"background\":\"#3296fa\"},on:{\"search\":function($event){return _vm.onSearch(_vm.searchValue)},\"cancel\":function($event){return _vm.$router.back()},\"focus\":function($event){_vm.isResultShow = false}},model:{value:(_vm.searchValue),callback:function ($$v) {_vm.searchValue=$$v},expression:\"searchValue\"}})],1),(_vm.isResultShow)?_c('SearchResult',{attrs:{\"search-value\":_vm.searchValue}}):(_vm.searchValue)?_c('SearchSuggestion',{attrs:{\"search-value\":_vm.searchValue},on:{\"search\":_vm.onSearch}}):_c('SearchHistory',{attrs:{\"search-histories\":_vm.searchHistories},on:{\"search\":_vm.onSearch,\"update-histories\":function($event){_vm.searchHistories = $event}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-suggestion\"},_vm._l((_vm.suggestions),function(suggestion,index){return _c('van-cell',{key:index,attrs:{\"icon\":\"search\"},on:{\"click\":function($event){return _vm.$emit('search', suggestion)}}},[_c('div',{attrs:{\"slot\":\"title\"},domProps:{\"innerHTML\":_vm._s(_vm.highlight(suggestion))},slot:\"title\"})])}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 搜素 相关请求模块\nimport request from '@/utils/request'\n\n// 获取 联想建议（自动补全）\nexport const getSearchSuggestions = q => {\n  return request({\n    method: 'GET',\n    url: '/app/v1_0/suggestion',\n    params: {\n      q // 请求的前缀词句\n    }\n  })\n}\n\n// 获取 获取搜索结果\nexport const getSearchResults = params => {\n  return request({\n    method: 'GET',\n    url: '/app/v1_0/search',\n    params\n  })\n}\n\n// 获取用户搜索历史\nexport const getSearchHistories = () => {\n  return request({\n    method: 'GET',\n    url: '/app/v1_0/search/histories'\n  })\n}\n","<template>\n  <div class=\"search-suggestion\">\n    <van-cell\n      v-for=\"(suggestion, index) in suggestions\"\n      :key=\"index\"\n      icon=\"search\"\n      @click=\"$emit('search', suggestion)\"\n    >\n      <div slot=\"title\" v-html=\"highlight(suggestion)\"></div>\n    </van-cell>\n  </div>\n</template>\n\n<script>\nimport { getSearchSuggestions } from '@/api/search'\nimport { debounce } from 'lodash'\nexport default {\n  name: 'SearchSuggestion',\n  props: {\n    searchValue: {\n      type: String,\n      required: true\n    }\n  },\n  data () {\n    return {\n      suggestions: [] // 联想建议数据\n    }\n  },\n  watch: {\n    // 属性名: 监视数据名称\n    // searchValue () {\n    //   console.log(123)\n    // }\n\n    searchValue: {\n      // 防抖处理\n      handler: debounce(async function () {\n        const { data } = await getSearchSuggestions(this.searchValue)\n        this.suggestions = data.data.options\n      }, 300),\n      immediate: true // 该回调将会在侦听开始之后被立即调用\n    }\n  },\n  methods: {\n    // 使 搜索的 文字高亮显示\n    highlight (suggestion) {\n      return suggestion.replace(\n        new RegExp(this.searchValue, 'gi'),\n        `<span style=\"color: #3296fa\">${this.searchValue}</span>`\n      )\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-suggestion.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-suggestion.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-suggestion.vue?vue&type=template&id=4327631e&\"\nimport script from \"./search-suggestion.vue?vue&type=script&lang=js&\"\nexport * from \"./search-suggestion.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-history\"},[_c('van-cell',{attrs:{\"title\":\"搜素历史\"}},[(_vm.isDeleteShow)?_c('div',[_c('span',{on:{\"click\":function($event){return _vm.$emit('update-histories', [])}}},[_vm._v(\"全部删除\")]),_vm._v(\" \"),_c('span',{on:{\"click\":function($event){_vm.isDeleteShow = false}}},[_vm._v(\"完成\")])]):_c('van-icon',{attrs:{\"name\":\"delete\"},on:{\"click\":function($event){_vm.isDeleteShow = true}}})],1),_vm._l((_vm.searchHistories),function(history,index){return _c('van-cell',{key:index,attrs:{\"title\":history},on:{\"click\":function($event){return _vm.onDelete(history, index)}}},[_c('van-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isDeleteShow),expression:\"isDeleteShow\"}],attrs:{\"name\":\"close\"}})],1)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"search-history\">\n    <van-cell title=\"搜素历史\">\n      <div v-if=\"isDeleteShow\">\n        <span @click=\"$emit('update-histories', [])\">全部删除</span>\n        &nbsp;&nbsp;\n        <span @click=\"isDeleteShow = false\">完成</span>\n      </div>\n      <van-icon\n        v-else\n        name=\"delete\"\n        @click=\"isDeleteShow = true\"\n      />\n    </van-cell>\n    <van-cell\n      :title=\"history\"\n      v-for=\"(history, index) in searchHistories\"\n      :key=\"index\"\n      @click=\"onDelete(history, index)\"\n    >\n      <van-icon\n        v-show=\"isDeleteShow\"\n        name=\"close\"\n      />\n    </van-cell>\n  </div>\n</template>\n\n<script>\n// import { setItem } from '@/utils/storage'\nexport default {\n  name: 'SearchHistory',\n  props: {\n    searchHistories: {\n      type: Array,\n      required: true\n    }\n  },\n  data () {\n    return {\n      isDeleteShow: false // 删除的显示状态\n    }\n  },\n  methods: {\n    onDelete (history, index) {\n      // 判断是否为删除状态\n      if (this.isDeleteShow) {\n        // 删除状态\n        this.searchHistories.splice(index, 1)\n        // 数据持久化\n        // setItem('search-histories', this.searchHistories)\n        return\n      }\n      // 非删除状态,展示搜索历史记录\n      this.$emit('search', history)\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-history.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-history.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-history.vue?vue&type=template&id=7c714a6c&scoped=true&\"\nimport script from \"./search-history.vue?vue&type=script&lang=js&\"\nexport * from \"./search-history.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c714a6c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-result\"},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.onLoadArticle},model:{value:(_vm.artLoading),callback:function ($$v) {_vm.artLoading=$$v},expression:\"artLoading\"}},_vm._l((_vm.articlelist),function(article,index){return _c('van-cell',{key:index,attrs:{\"title\":article.title}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"search-result\">\n    <van-list\n      v-model=\"artLoading\"\n      :finished=\"finished\"\n      finished-text=\"没有更多了\"\n      @load=\"onLoadArticle\"\n    >\n      <van-cell\n        v-for=\"(article, index) in articlelist\"\n        :key=\"index\"\n        :title=\"article.title\"\n      />\n    </van-list>\n  </div>\n</template>\n\n<script>\nimport { getSearchResults } from '@/api/search'\nexport default {\n  name: 'SearchResult',\n  props: {\n    searchValue: {\n      type: String,\n      required: true\n    }\n  },\n  data () {\n    return {\n      articlelist: [],\n      artLoading: false,\n      finished: false,\n      page: 1, // 页数\n      perPage: 10 // 每页数量\n    }\n  },\n  methods: {\n    async onLoadArticle () {\n      // 异步更新数据\n      const { data } = await getSearchResults({\n        page: this.page, // 页数\n        per_page: this.perPage, // 每页数量\n        q: this.searchValue // 搜索关键词\n      })\n\n      // 将数据 放到列表中\n      const { results } = data.data\n      this.articlelist.push(...results)\n      // 关闭 loading\n      this.artLoading = false\n\n      // 判断是否 还有数据\n      if (results.length) {\n        // 如果有,获取下一页数据\n        this.page++\n      } else {\n        this.finished = true\n      }\n    }\n  }\n}\n</script>\n\n<style>\n.search-result {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 54px;\n  bottom: 0;\n  overflow-y: auto;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-result.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-result.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-result.vue?vue&type=template&id=76d33bba&\"\nimport script from \"./search-result.vue?vue&type=script&lang=js&\"\nexport * from \"./search-result.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search-result.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"search-container\">\n    <!-- 在 van-search 外层增加 form 标签，且 action 不为空，即可在 iOS 输入法中显示搜索按钮 -->\n    <form action=\"/\">\n      <van-search\n        v-model=\"searchValue\"\n        placeholder=\"请输入搜索关键词\"\n        show-action\n        background=\"#3296fa\"\n        @search=\"onSearch(searchValue)\"\n        @cancel=\"$router.back()\"\n        @focus=\"isResultShow = false\"\n      />\n    </form>\n\n    <!-- 搜索结果 -->\n    <SearchResult\n      v-if=\"isResultShow\"\n      :search-value=\"searchValue\"\n    />\n\n    <!-- 联想建议 -->\n    <SearchSuggestion\n      v-else-if=\"searchValue\"\n      :search-value=\"searchValue\"\n      @search=\"onSearch\"\n    />\n\n    <!-- 搜素历史 -->\n    <SearchHistory\n      v-else\n      :search-histories=\"searchHistories\"\n      @search=\"onSearch\"\n      @update-histories=\"searchHistories = $event\"\n    />\n  </div>\n</template>\n\n<script>\nimport SearchSuggestion from './components/search-suggestion'\nimport SearchHistory from './components/search-history'\nimport SearchResult from './components/search-result'\nimport {\n  setItem,\n  getItem\n} from '@/utils/storage'\nimport { mapState } from 'vuex'\n// import { getSearchHistories } from '@/api/search'\nexport default {\n  name: 'SearchIndex',\n  components: {\n    SearchSuggestion,\n    SearchHistory,\n    SearchResult\n  },\n  data () {\n    return {\n      searchValue: '', // 搜索框中的关键字\n      isResultShow: false, // 搜索结果状态是否显示\n      searchHistories: [] // 搜素历史记录\n    }\n  },\n  watch: {\n    // 监视 data中的 搜素历史记录 数据变化,将其存储到本地\n    searchHistories () {\n      setItem('search-histories', this.searchHistories)\n    }\n  },\n  computed: {\n    ...mapState(['user'])\n  },\n  created () {\n    this.loadSearchHistories()\n  },\n  methods: {\n    onSearch (searchValue) {\n      // 将搜索框中值设置为 你点击搜素的值\n      this.searchValue = searchValue\n      // 检测索引\n      const index = this.searchHistories.indexOf(this.searchValue)\n      // 判断\n      if (index !== -1) {\n        // 把重复项 删除\n        this.searchHistories.splice(index, 1)\n      }\n      // 把新的搜素记录 放入搜素历史记录 顶部\n      this.searchHistories.unshift(this.searchValue)\n\n      // 将搜素历史 记录保存到 本地\n      // setItem('search-histories', this.searchHistories)\n      // 显示 搜素结果\n      this.isResultShow = true\n    },\n    loadSearchHistories () {\n      // let searchHistories = getItem('search-histories') || []\n      // // 判断 用户是否登录\n      // if (this.user) {\n      //   const { data } = await getSearchHistories()\n      //   // 数组去重\n      //   searchHistories = [...new Set([\n      //     ...searchHistories,\n      //     ...data.data.keywords\n      //   ])]\n      // }\n      const searchHistories = getItem('search-histories') || []\n      this.searchHistories = searchHistories\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.search-container {\n  .van-search__action {\n    font-size: 14px;\n    color: #fff;\n  }\n}\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5b8fa762&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=5b8fa762&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b8fa762\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}