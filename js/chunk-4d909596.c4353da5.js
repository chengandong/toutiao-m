(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d909596"],{"0176":function(e,t,a){"use strict";var r=a("6b90"),s=a.n(r);s.a},"4d63":function(e,t,a){var r=a("83ab"),s=a("da84"),n=a("94ca"),i=a("7156"),c=a("9bf2").f,o=a("241c").f,u=a("44e7"),h=a("ad6d"),l=a("9f7f"),f=a("6eeb"),d=a("d039"),p=a("69f3").set,g=a("2626"),v=a("b622"),m=v("match"),w=s.RegExp,S=w.prototype,b=/a/g,x=/a/g,_=new w(b)!==b,k=l.UNSUPPORTED_Y,y=r&&n("RegExp",!_||k||d((function(){return x[m]=!1,w(b)!=b||w(x)==x||"/a/i"!=w(b,"i")})));if(y){var H=function(e,t){var a,r=this instanceof H,s=u(e),n=void 0===t;if(!r&&s&&e.constructor===H&&n)return e;_?s&&!n&&(e=e.source):e instanceof H&&(n&&(t=h.call(e)),e=e.source),k&&(a=!!t&&t.indexOf("y")>-1,a&&(t=t.replace(/y/g,"")));var c=i(_?new w(e,t):w(e,t),r?this:S,H);return k&&a&&p(c,{sticky:a}),c},V=function(e){e in H||c(H,e,{configurable:!0,get:function(){return w[e]},set:function(t){w[e]=t}})},O=o(w),R=0;while(O.length>R)V(O[R++]);S.constructor=H,H.prototype=S,f(s,"RegExp",H)}g("RegExp")},"5c84":function(e,t,a){"use strict";var r=a("a293"),s=a.n(r);s.a},"6b90":function(e,t,a){},a293:function(e,t,a){},efe3:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search-container"},[a("form",{attrs:{action:"/"}},[a("van-search",{attrs:{placeholder:"请输入搜索关键词","show-action":"",background:"#3296fa"},on:{search:function(t){return e.onSearch(e.searchValue)},cancel:function(t){return e.$router.back()},focus:function(t){e.isResultShow=!1}},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),e.isResultShow?a("SearchResult",{attrs:{"search-value":e.searchValue}}):e.searchValue?a("SearchSuggestion",{attrs:{"search-value":e.searchValue},on:{search:e.onSearch}}):a("SearchHistory",{attrs:{"search-histories":e.searchHistories},on:{search:e.onSearch,"update-histories":function(t){e.searchHistories=t}}})],1)},s=[],n=(a("c975"),a("a434"),a("5530")),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search-suggestion"},e._l(e.suggestions,(function(t,r){return a("van-cell",{key:r,attrs:{icon:"search"},on:{click:function(a){return e.$emit("search",t)}}},[a("div",{attrs:{slot:"title"},domProps:{innerHTML:e._s(e.highlight(t))},slot:"title"})])})),1)},c=[],o=(a("4d63"),a("ac1f"),a("25f0"),a("5319"),a("96cf"),a("1da1")),u=a("b775"),h=function(e){return Object(u["a"])({method:"GET",url:"/app/v1_0/suggestion",params:{q:e}})},l=function(e){return Object(u["a"])({method:"GET",url:"/app/v1_0/search",params:e})},f=a("2ef0"),d={name:"SearchSuggestion",props:{searchValue:{type:String,required:!0}},data:function(){return{suggestions:[]}},watch:{searchValue:{handler:Object(f["debounce"])(Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h(this.searchValue);case 2:t=e.sent,a=t.data,this.suggestions=a.data.options;case 5:case"end":return e.stop()}}),e,this)}))),300),immediate:!0}},methods:{highlight:function(e){return e.replace(new RegExp(this.searchValue,"gi"),'<span style="color: #3296fa">'.concat(this.searchValue,"</span>"))}}},p=d,g=a("2877"),v=Object(g["a"])(p,i,c,!1,null,null,null),m=v.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search-history"},[a("van-cell",{attrs:{title:"搜素历史"}},[e.isDeleteShow?a("div",[a("span",{on:{click:function(t){return e.$emit("update-histories",[])}}},[e._v("全部删除")]),e._v(" "),a("span",{on:{click:function(t){e.isDeleteShow=!1}}},[e._v("完成")])]):a("van-icon",{attrs:{name:"delete"},on:{click:function(t){e.isDeleteShow=!0}}})],1),e._l(e.searchHistories,(function(t,r){return a("van-cell",{key:r,attrs:{title:t},on:{click:function(a){return e.onDelete(t,r)}}},[a("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.isDeleteShow,expression:"isDeleteShow"}],attrs:{name:"close"}})],1)}))],2)},S=[],b={name:"SearchHistory",props:{searchHistories:{type:Array,required:!0}},data:function(){return{isDeleteShow:!1}},methods:{onDelete:function(e,t){this.isDeleteShow?this.searchHistories.splice(t,1):this.$emit("search",e)}}},x=b,_=Object(g["a"])(x,w,S,!1,null,"7c714a6c",null),k=_.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search-result"},[a("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoadArticle},model:{value:e.artLoading,callback:function(t){e.artLoading=t},expression:"artLoading"}},e._l(e.articlelist,(function(e,t){return a("van-cell",{key:t,attrs:{title:e.title}})})),1)],1)},H=[],V=a("2909"),O={name:"SearchResult",props:{searchValue:{type:String,required:!0}},data:function(){return{articlelist:[],artLoading:!1,finished:!1,page:1,perPage:10}},methods:{onLoadArticle:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l({page:e.page,per_page:e.perPage,q:e.searchValue});case 2:r=t.sent,s=r.data,n=s.data.results,(a=e.articlelist).push.apply(a,Object(V["a"])(n)),e.artLoading=!1,n.length?e.page++:e.finished=!0;case 8:case"end":return t.stop()}}),t)})))()}}},R=O,j=(a("0176"),Object(g["a"])(R,y,H,!1,null,null,null)),E=j.exports,D=a("5d2d"),L=a("2f62"),$={name:"SearchIndex",components:{SearchSuggestion:m,SearchHistory:k,SearchResult:E},data:function(){return{searchValue:"",isResultShow:!1,searchHistories:[]}},watch:{searchHistories:function(){Object(D["b"])("search-histories",this.searchHistories)}},computed:Object(n["a"])({},Object(L["b"])(["user"])),created:function(){this.loadSearchHistories()},methods:{onSearch:function(e){this.searchValue=e;var t=this.searchHistories.indexOf(this.searchValue);-1!==t&&this.searchHistories.splice(t,1),this.searchHistories.unshift(this.searchValue),this.isResultShow=!0},loadSearchHistories:function(){var e=Object(D["a"])("search-histories")||[];this.searchHistories=e}}},q=$,P=(a("5c84"),Object(g["a"])(q,r,s,!1,null,"5b8fa762",null));t["default"]=P.exports}}]);
//# sourceMappingURL=chunk-4d909596.c4353da5.js.map